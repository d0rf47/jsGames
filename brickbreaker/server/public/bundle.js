(()=>{"use strict";var e=function e(i){var t=this;!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.paddle=i.paddle,document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:i.paddle.moveLeft();break;case 39:i.paddle.moveRight();break;case 13:i.ball.start();break;case 27:i.ball.stop();break;case 32:i.init();break;default:return}})),document.addEventListener("keyup",(function(e){switch(e.keyCode){case 37:case 39:t.game.paddle.stop()}}))};function i(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var s=function(){function e(i){var s=this;!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"width",void 0),t(this,"height",void 0),t(this,"src",new Image(325,120)),t(this,"position",{x:1,y:1}),t(this,"midPoint",void 0),t(this,"maxSpeed",7.5),t(this,"currSpeed",0),t(this,"game",void 0),this.game=i,this.width=325,this.height=120,this.position.y=i.height-this.height+50,this.position.x=i.width/2-this.width/2,this.src.src="src/assets/paddle.webp",this.src.onload=function(){i.ctx.drawImage(s.src,s.position.x,s.position.y)}}var s,n;return s=e,(n=[{key:"draw",value:function(){this.game.ctx.drawImage(this.src,this.position.x,this.position.y)}},{key:"update",value:function(){this.position.x+=this.currSpeed,this.draw()}},{key:"moveLeft",value:function(){this.position.x>10?this.currSpeed=-this.maxSpeed:this.currSpeed=0}},{key:"moveRight",value:function(){this.position.x+this.src.width<790?this.currSpeed=this.maxSpeed:this.currSpeed=0}},{key:"stop",value:function(){this.currSpeed=0}}])&&i(s.prototype,n),e}();function n(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var o=function(){function e(i){var t=this;!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"position",{x:1,y:1}),a(this,"src",new Image(25,25)),a(this,"maxSpeedY",5),a(this,"maxSpeedX",2),a(this,"speed",{x:2,y:5}),a(this,"game",void 0),a(this,"midPoint",12.5),this.game=i,this.maxSpeedY=i.maxSpeed,this.speed.y=this.maxSpeedY,this.position.y=i.height-this.src.height-30,this.position.x=i.width/2-this.src.width/2,this.src.src="src/assets/ball.webp",this.src.onload=function(){t.draw()}}var i,t;return i=e,(t=[{key:"draw",value:function(){this.game.ctx.clearRect(0,0,800,600),this.game.ctx.drawImage(this.src,this.position.x,this.position.y)}},{key:"update",value:function(){this.position.x+=this.speed.x,this.position.y+=this.speed.y,this.checkBrickCollision(),this.checkWallCollision(),this.checkPaddleCollision(),this.draw()}},{key:"checkBrickCollision",value:function(){this.midPoint=this.position.x+12.5;for(var e=0;e<this.game.bricks.length;e++)if(this.game.bricks[e].drawable){var i=this.game.bricks[e].position.y+this.game.bricks[e].src.height,t=this.game.bricks[e].position.y,s=this.game.ball.position.y,n=this.game.bricks[e].position.x,a=this.game.bricks[e].position.x+this.game.bricks[e].src.width;s<=i&&s>=t&&this.midPoint>=n&&this.midPoint<=a&&(this.speed.y=-this.speed.y,this.game.bricks.splice(e,1),this.game.score+=1)}}},{key:"checkWallCollision",value:function(){(this.position.x<=0||this.position.x+this.src.width>=this.game.width)&&(this.speed.x=-this.speed.x),(this.position.y+this.src.height>=this.game.height||this.position.y<=0)&&(this.speed.y=-this.speed.y)}},{key:"checkPaddleCollision",value:function(){var e=this.position.y+this.src.height,i=this.game.paddle.position.y;e>=i&&this.inBoundOfPaddle()&&(this.speed.y=-this.speed.y,this.position.y=i-this.src.height)}},{key:"inBoundOfPaddle",value:function(){var e=this.game.paddle.position.x,i=this.game.paddle.position.x+this.game.paddle.src.width;return this.position.x>=e&&this.position.x+this.src.width<=i}},{key:"stop",value:function(){"play"===this.game.gameState&&(this.game.gameState="pause",this.maxSpeedY=this.speed.y,this.maxSpeedX=this.speed.x,this.speed.x=0,this.speed.y=0)}},{key:"start",value:function(){"pause"===this.game.gameState&&(this.game.gameState="play",this.speed.x=this.maxSpeedX,this.speed.y=this.maxSpeedY)}}])&&n(i.prototype,t),e}();function h(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var c=function(){function e(i,t,s){var n=this;!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"game",void 0),r(this,"src",new Image(150,70)),r(this,"row",1),r(this,"drawable",!0),r(this,"position",{x:5,y:1}),this.src.src="src/assets/brick.webp",this.game=i,this.row=t,this.drawable=s,this.checkPosition(),this.src.onload=function(){n.draw()}}var i,t;return i=e,(t=[{key:"draw",value:function(){this.drawable&&this.game.ctx.drawImage(this.src,this.position.x,this.position.y)}},{key:"update",value:function(){this.draw()}},{key:"checkPosition",value:function(){var e=this.game.bricks[this.game.bricks.length-1];e&&(this.row>e.row?(this.position.y=e.position.y+this.src.height+5,this.position.x=5):(this.position.x=e.position.x+1.05*this.src.width,this.position.y=e.position.y))}}])&&h(i.prototype,t),e}(),l=[{ballSpeed:5,bricks:[[1,1,0,1,1],[1,0,1,0,1],[1,1,1,1,1],[1,1,0,1,1]]},{ballSpeed:7.5,bricks:[[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,1]]}];function d(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function u(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var p=function(){function i(t,s,n){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i),u(this,"gameState","stop"),u(this,"ctx",void 0),u(this,"gameObjs",[]),u(this,"bricks",[]),u(this,"paddle",void 0),u(this,"ball",void 0),u(this,"width",void 0),u(this,"height",void 0),u(this,"score",0),u(this,"currLevel",0),u(this,"maxSpeed",0),u(this,"maxScore",0),u(this,"levels",l),u(this,"maxLevel",this.levels.length),this.ctx=n,this.width=t,this.height=s,new e(this)}var t,n;return t=i,(n=[{key:"init",value:function(){document.getElementById("homeScreen").classList.add("invis"),document.querySelector(".gameWrapper").classList.remove("invis"),this.start(),this.gameState="play"}},{key:"start",value:function(){this.maxSpeed=this.levels[this.currLevel].ballSpeed,this.paddle=new s(this),this.ball=new o(this),this.initBricks()}},{key:"control",value:function(){switch(this.gameState){case"play":this.update();break;case"pause":this.ball.stop()}}},{key:"update",value:function(){this.maxScore===this.score?this.nextLevel():(this.ball.update(),this.paddle.update(),this.bricks.forEach((function(e){return e.update()})),this.updateScore())}},{key:"initBricks",value:function(){for(var e=this,i=function(i){e.levels[e.currLevel].bricks[i].forEach((function(t){1===t?(e.bricks.push(new c(e,i+1,!0)),e.maxScore++):e.bricks.push(new c(e,i+1,!1))}))},t=0;t<this.levels[this.currLevel].bricks.length;t++)i(t)}},{key:"updateScore",value:function(){document.getElementById("score").innerHTML=this.score}},{key:"nextLevel",value:function(){this.currLevel++,document.getElementById("level").innerHTML=this.currLevel,this.bricks=[],this.start(),this.gameState="pause"}}])&&d(t.prototype,n),i}(),m=document.getElementById("gameScreen").height,f=new p(document.getElementById("gameScreen").width,m,document.getElementById("gameScreen").getContext("2d"));!function e(i){f.control(),requestAnimationFrame(e)}()})();