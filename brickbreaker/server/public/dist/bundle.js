(()=>{"use strict";var e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:t.paddle.moveLeft();break;case 39:t.paddle.moveRight();break;case 13:t.ball.start();break;case 27:t.ball.stop();break;case 32:t.init();break;default:return}})),document.addEventListener("keyup",(function(e){switch(e.keyCode){case 37:case 39:t.paddle.stop()}}))};function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=function(){function e(t){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"width",void 0),i(this,"height",void 0),i(this,"src",new Image(325,120)),i(this,"position",{x:1,y:1}),i(this,"midPoint",void 0),i(this,"maxSpeed",7.5),i(this,"currSpeed",0),i(this,"game",void 0),this.game=t,this.width=325,this.height=120,this.position.y=t.height-this.height+50,this.position.x=t.width/2-this.width/2,this.src.src="../assets/paddle.webp",this.src.onload=function(){t.ctx.drawImage(s.src,s.position.x,s.position.y)}}var s,n;return s=e,(n=[{key:"draw",value:function(){this.game.ctx.drawImage(this.src,this.position.x,this.position.y)}},{key:"update",value:function(){this.position.x+=this.currSpeed,this.draw()}},{key:"moveLeft",value:function(){this.position.x>10?this.currSpeed=-this.maxSpeed:this.currSpeed=0}},{key:"moveRight",value:function(){this.position.x+this.src.width<790?this.currSpeed=this.maxSpeed:this.currSpeed=0}},{key:"stop",value:function(){this.currSpeed=0}}])&&t(s.prototype,n),e}();function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"position",{x:1,y:1}),a(this,"src",new Image(25,25)),a(this,"maxSpeedY",5),a(this,"maxSpeedX",2),a(this,"speed",{x:2,y:5}),a(this,"game",void 0),a(this,"midPoint",12.5),this.game=t,this.maxSpeedY=t.maxSpeed,this.speed.y=this.maxSpeedY,this.position.y=t.height-this.src.height-30,this.position.x=t.width/2-this.src.width/2,this.src.src="../assets/ball.webp",this.src.onload=function(){i.draw()}}var t,i;return t=e,(i=[{key:"draw",value:function(){this.game.ctx.clearRect(0,0,800,600),this.game.ctx.drawImage(this.src,this.position.x,this.position.y)}},{key:"update",value:function(){this.position.x+=this.speed.x,this.position.y+=this.speed.y,this.checkBrickCollision(),this.checkWallCollision(),this.checkPaddleCollision(),this.draw()}},{key:"checkBrickCollision",value:function(){this.midPoint=this.position.x+12.5;for(var e=0;e<this.game.bricks.length;e++)if(this.game.bricks[e].drawable){var t=this.game.bricks[e].position.y+this.game.bricks[e].src.height,i=this.game.bricks[e].position.y,s=this.game.ball.position.y,n=this.game.bricks[e].position.x,a=this.game.bricks[e].position.x+this.game.bricks[e].src.width;s<=t&&s>=i&&this.midPoint>=n&&this.midPoint<=a&&(this.speed.y=-this.speed.y,this.game.bricks.splice(e,1),this.game.score+=1)}}},{key:"checkWallCollision",value:function(){(this.position.x<=0||this.position.x+this.src.width>=this.game.width)&&(this.speed.x=-this.speed.x),(this.position.y+this.src.height>=this.game.height||this.position.y<=0)&&(this.speed.y=-this.speed.y)}},{key:"checkPaddleCollision",value:function(){var e=this.position.y+this.src.height,t=this.game.paddle.position.y;e>=t&&this.inBoundOfPaddle()&&(this.speed.y=-this.speed.y,this.position.y=t-this.src.height)}},{key:"inBoundOfPaddle",value:function(){var e=this.game.paddle.position.x,t=this.game.paddle.position.x+this.game.paddle.src.width;return this.position.x>=e&&this.position.x+this.src.width<=t}},{key:"stop",value:function(){"play"===this.game.gameState&&(this.game.gameState="pause",this.maxSpeedY=this.speed.y,this.maxSpeedX=this.speed.x,this.speed.x=0,this.speed.y=0)}},{key:"start",value:function(){"pause"===this.game.gameState&&(this.game.gameState="play",this.speed.x=this.maxSpeedX,this.speed.y=this.maxSpeedY)}}])&&n(t.prototype,i),e}();function h(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=function(){function e(t,i,s){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"game",void 0),r(this,"src",new Image(150,70)),r(this,"row",1),r(this,"drawable",!0),r(this,"position",{x:5,y:1}),this.src.src="../assets/brick.webp",this.game=t,this.row=i,this.drawable=s,this.checkPosition(),this.src.onload=function(){n.draw()}}var t,i;return t=e,(i=[{key:"draw",value:function(){this.drawable&&this.game.ctx.drawImage(this.src,this.position.x,this.position.y)}},{key:"update",value:function(){this.draw()}},{key:"checkPosition",value:function(){var e=this.game.bricks[this.game.bricks.length-1];e&&(this.row>e.row?(this.position.y=e.position.y+this.src.height+5,this.position.x=5):(this.position.x=e.position.x+1.05*this.src.width,this.position.y=e.position.y))}}])&&h(t.prototype,i),e}(),l=[{ballSpeed:5,bricks:[[1,1,0,1,1],[1,0,1,0,1],[1,1,1,1,1],[1,1,0,1,1]]},{ballSpeed:7.5,bricks:[[0,1,0,1,0],[1,1,1,1,1],[1,0,1,0,1]]}];function d(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=function(){function t(i,s,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"gameState","stop"),u(this,"ctx",void 0),u(this,"gameObjs",[]),u(this,"bricks",[]),u(this,"paddle",void 0),u(this,"ball",void 0),u(this,"width",void 0),u(this,"height",void 0),u(this,"score",0),u(this,"currLevel",0),u(this,"maxSpeed",0),u(this,"maxScore",0),u(this,"levels",l),u(this,"maxLevel",this.levels.length),this.ctx=n,this.width=i,this.height=s,new e(this)}var i,n;return i=t,(n=[{key:"init",value:function(){"stop"===this.gameState&&(document.getElementById("homeScreen").classList.add("invis"),document.querySelector(".gameWrapper").classList.remove("invis"),this.start(),this.gameState="play")}},{key:"start",value:function(){if(this.currLevel===this.levels.length)return this.gameState="stop",void(window.confirm("GAME OVER Final Score: ".concat(this.score))&&this.reset());this.maxSpeed=this.levels[this.currLevel].ballSpeed,this.paddle=new s(this),this.ball=new o(this),this.initBricks()}},{key:"control",value:function(){switch(this.gameState){case"play":this.update();break;case"pause":this.ball.stop()}}},{key:"update",value:function(){this.maxScore===this.score?this.nextLevel():(this.ball.update(),this.paddle.update(),this.bricks.forEach((function(e){return e.update()})),this.updateScore())}},{key:"initBricks",value:function(){for(var e=this,t=function(t){e.levels[e.currLevel].bricks[t].forEach((function(i){1===i?(e.bricks.push(new c(e,t+1,!0)),e.maxScore++):e.bricks.push(new c(e,t+1,!1))}))},i=0;i<this.levels[this.currLevel].bricks.length;i++)t(i)}},{key:"updateScore",value:function(){document.getElementById("score").innerHTML=this.score}},{key:"nextLevel",value:function(){this.currLevel++,document.getElementById("level").innerHTML=this.currLevel+1,this.bricks=[],this.start(),this.gameState="pause"}},{key:"reset",value:function(){}}])&&d(i.prototype,n),t}(),m=document.getElementById("gameScreen").height,f=new p(document.getElementById("gameScreen").width,m,document.getElementById("gameScreen").getContext("2d"));!function e(t){f.control(),requestAnimationFrame(e)}()})();