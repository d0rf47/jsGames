(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var i=function(){function i(e,s,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"type",""),t(this,"color",""),t(this,"position",""),t(this,"icon",""),t(this,"moved",!1),this.position=s,this.type=e,this.color=n,this.initPiece()}var s,n;return s=i,(n=[{key:"initPiece",value:function(){var e=document.createElement("i"),t=document.getElementById("".concat(this.position));switch(e.classList.add(this.color,"gamepiece"),e.setAttribute("data-position",this.position),e.setAttribute("data-type",this.type),e.setAttribute("data-team",this.color),e.setAttribute("data-object",window.btoa(JSON.stringify(this))),this.type){case"pawn":e.classList.add("fas","fa-chess-pawn");break;case"bishop":e.classList.add("fas","fa-chess-bishop");break;case"rook":e.classList.add("fas","fa-chess-rook");break;case"knight":e.classList.add("fas","fa-chess-knight");break;case"queen":e.classList.add("fas","fa-chess-queen");break;case"king":e.classList.add("fas","fa-chess-king")}this.icon=e,t.append(this.icon)}}])&&e(s.prototype,n),i}();function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var a=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"tiles",void 0),o(this,"lightPieces",[]),o(this,"darkPieces",[]),o(this,"locatePiece",void 0),this.tiles=(t=Array(8),function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){return Array(8).fill(void 0)}))}var t,a;return t=e,(a=[{key:"initBoard",value:function(){for(var e=document.getElementsByClassName("tile"),t=0,i=0,s=0;s<64;s++)this.tiles[t][i]={location:e[s].attributes.id.nodeValue,occupied:!1,element:e[s]},i++,7!==s&&15!==s&&23!==s&&31!==s&&39!==s&&47!==s&&55!==s||(t++,i=0);this.initlightPieces(),this.initdarkPieces(),console.log(this.tiles)}},{key:"initlightPieces",value:function(){for(var e=97,t=1;t<=8;t++){var s=2+String.fromCharCode(e),n=new i("pawn",s,"light");this.lightPieces.push(n),this.tiles[1][t-1].occupied=!0,e++}this.lightPieces.push(new i("rook","1a","light")),this.tiles[0][0].occupied=!0,this.lightPieces.push(new i("rook","1h","light")),this.tiles[0][7].occupied=!0,this.lightPieces.push(new i("knight","1b","light")),this.tiles[0][1].occupied=!0,this.lightPieces.push(new i("knight","1g","light")),this.tiles[0][6].occupied=!0,this.lightPieces.push(new i("bishop","1c","light")),this.tiles[0][2].occupied=!0,this.lightPieces.push(new i("bishop","1f","light")),this.tiles[0][5].occupied=!0,this.lightPieces.push(new i("queen","1d","light")),this.tiles[0][3].occupied=!0,this.lightPieces.push(new i("king","1e","light")),this.tiles[0][4].occupied=!0}},{key:"initdarkPieces",value:function(){for(var e=97,t=1;t<=8;t++){var s=7+String.fromCharCode(e),n=new i("pawn",s,"dark");this.darkPieces.push(n),this.tiles[6][t-1].occupied=!0,e++}this.darkPieces.push(new i("rook","8a","dark")),this.tiles[7][0].occupied=!0,this.darkPieces.push(new i("rook","8h","dark")),this.tiles[7][7].occupied=!0,this.darkPieces.push(new i("knight","8b","dark")),this.tiles[7][1].occupied=!0,this.darkPieces.push(new i("knight","8g","dark")),this.tiles[7][6].occupied=!0,this.darkPieces.push(new i("bishop","8c","dark")),this.tiles[7][2].occupied=!0,this.darkPieces.push(new i("bishop","8f","dark")),this.tiles[7][5].occupied=!0,this.darkPieces.push(new i("queen","8d","dark")),this.tiles[7][3].occupied=!0,this.darkPieces.push(new i("king","8e","dark")),this.tiles[7][4].occupied=!0}},{key:"locateTile",value:function(e){for(var t=0,i=0,s=0;s<64;s++){if(this.tiles[t][i].location===e)return{tile:this.tiles[t][i],index:{row:t,col:i}};i++,7!==s&&15!==s&&23!==s&&31!==s&&39!==s&&47!==s&&55!==s||(t++,i=0)}}}])&&n(t.prototype,a),e}();function r(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(new(function(){function e(){var t,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(t="board")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}var t,i;return t=e,(i=[{key:"initGame",value:function(){var e=this;this.board=new a,this.board.initBoard();for(var t=document.getElementsByClassName("gamepiece"),i=function(i){["mousedown","mouseup"].forEach((function(s){"mousedown"===s?t[i].addEventListener(s,(function(t){e.checkPotentialMoves(t.target)})):"mouseup"===s&&t[i].addEventListener(s,(function(e){var t=document.getElementsByClassName("overlay-effect");console.log(t);for(var i=t.length-1;i>=0;i--)t[i].classList.remove("overlay-effect")}))}))},s=0;s<t.length;s++)i(s)}},{key:"checkPotentialMoves",value:function(e){var t=JSON.parse(window.atob(e.getAttribute("data-object")));this.checkPawnMove(t)}},{key:"checkPawnMove",value:function(e){var t=this,i=this.board.locateTile(e.position);console.log(" piece: ",e),console.log("tile",i);var s=i.index.row,n=i.index.col,o=[],a=1;"light"===e.color&&(a=-1),this.board.tiles[s+a][n].occupied||(e.moved||o.push({row:s+a+a,col:n}),o.push({row:s+a,col:n})),n-1>-1&&n+1<8&&s+a<8&&a>-1&&this.board.tiles[i.index.row+a][i.index.col-1].occupied&&this.board.tiles[i.index.row+a][i.index.col-1].element.children[0].getAttribute("data-team")!==e.team&&o.push({row:i.index.row+a,col:i.index.col-1}),o.forEach((function(e){t.board.tiles[e.row][e.col].element.classList.add("overlay-effect")}))}}])&&r(t.prototype,i),e}())).initGame()})();